<div class="all-container">
  <div class="link-trip">
    <%= link_to "Back to trip", trip_path(@trip), class: "btn btn-warning" %>
  </div>
  <div class="text-center header-show">
    <h2><%= @activity.name %></h1>
      <p>Recommended for: <%= @activity.tod %></p>
  </div>
  <div class="image-contain">
    <!-- <div class="image-show" style="background-image: url(<%#= asset_path check_photo(@activity) %>)"> -->
    </div>
  </div>
  <div class="show-rating">
    <div class="show-bold">
      <% if @activity.reviews.empty? %>
        <% 5.times do %>
          <div class="star">
            <i class="far fa-star"></i>
          </div>
        <% end %>
      <% else %>
        <div class="star">
          <% @activity.averagerating.times do  %>
            <i class="fas fa-star"></i>
          <% end %>
          <% (5 - @activity.averagerating).times do %>
            <i class="far fa-star"></i>
          <% end %>
        </div>
      <% end %>
    </div>
    <div class="show-bold">
      <p>$<%= @activity.price %></p>
    </div>
  </div>
  <div class="description">
    <p><%= @activity.description %></p>
  </div>
  <div class="review-act">
    <h4>Ratings</h4>
    <button type="button" class="btn btn-warning review-btn" data-toggle="modal" data-target="#rate">
      Rate
    </button>
  </div>
  <div class="review-show">
    <% if @activity.reviews.blank?  %>
      <p>Be the first to rate this activity</p>
    <% else %>
    <% @activity.reviews.each do |review| %>
      <div class="review-info">
        <div class="d-flex">
          <div class ="userphoto">
            <%= @activity.user.photo %>
          </div>
          <p class="review-user"><%= @activity.user.username %></p>
        </div>
        <div class="star">
          <% review.rating.times do  %>
            <i class="fas fa-star"></i>
          <% end %>
          <% (5 - review.rating).times do %>
            <i class="far fa-star"></i>
          <% end %>
        </div>
      </div>
    <% end %>
    <% end %>
  </div>
  <h4>Where it is</h4>
  <div
    id="map"
    style="width: 100%;
    height: 250px;"
    data-markers="<%= @markers.to_json %>"
    data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
  >
  </div>
</div>

<div class="modal modal-review fade" id="rate" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content modal-content-review">
      <div class="modal-header">
        <h5 class="modal-title modal-title-review" id="exampleModalLabel">Rate</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <%= simple_form_for([@activity, @review], class: "review_form") do |f| %>
          <%= f.input :rating, collection: (1..5).to_a, label: "Rate your experience" %>
          <%= f.button :submit, class: "hidden" %>
        <% end %>
      </div>
      </div>
    </div>
  </div>
</div>
